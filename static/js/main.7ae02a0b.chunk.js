(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){},22:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var c,s=n(7),r=n.n(s),a=n(4),o=n(6);!function(t){t.SET_POSTS="SET_POSTS",t.SET_SELECTED_POST=" SET_SELECTED_POST",t.SET_COMMENTS="SET_COMMENTS",t.ADD_COMMENT=" ADD_COMMENT"}(c||(c={}));var u=Object(o.b)(c.SET_POSTS),i=Object(o.b)(c.SET_SELECTED_POST),l=Object(o.b)(c.SET_COMMENTS),j=Object(o.b)(c.ADD_COMMENT),d=Object(o.c)({posts:[],comments:[],selectedPost:null},(function(t){t.addCase(u,(function(t,e){t.posts=e.payload})),t.addCase(i,(function(t,e){t.selectedPost=e.payload})),t.addCase(l,(function(t,e){t.comments=e.payload})),t.addCase(j,(function(t,e){t.comments.push(e.payload)}))})),p=Object(o.a)({reducer:d}),b=n(5),f=n(0),m=(n(19),n(20),n(3)),O=n(2),h=n.n(O),x="https://mate.academy/students-api",v=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,fetch("".concat(x,"/posts"));case 3:n=t.sent,t.next=9;break;case 6:return t.next=8,fetch("".concat(x,"/posts/").concat(e));case 8:n=t.sent;case 9:return t.abrupt("return",n.json());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/posts/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/posts/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(m.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=n(11),T=n.n(y),P=(n(22),n(1)),E=function(t){var e=t.posts,n=t.selectPostId,c=t.onSelectedPostId,s=Object(a.b)(),r=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:return t.next=4,v(0);case 4:n=t.sent,s(u(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)("div",{className:"PostsList",children:[Object(P.jsx)("h2",{children:"Posts:"}),Object(P.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.map((function(t){return Object(P.jsxs)("li",{className:"PostsList__item",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("b",{children:"[User #".concat(t.userId,"]:")}),t.title]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{type:"button",className:T()("PostsList__button","button",{"PostsList__button--active":n===t.id}),onClick:function(){return n===t.id?c(0):c(t.id)},children:n===t.id?"Close":"Open"}),Object(P.jsx)("button",{type:"button",className:"PostsList__button--delete button",onClick:function(){return r(t.id)},children:"X"})]})]},t.id)}))})]})},C=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments?postId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Object(m.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/comments"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=(n(24),function(t){var e=t.selectedPostId,n=t.setComments,c=Object(f.useState)(""),s=Object(b.a)(c,2),r=s[0],o=s[1],u=Object(f.useState)(""),i=Object(b.a)(u,2),l=i[0],d=i[1],p=Object(f.useState)(""),O=Object(b.a)(p,2),x=O[0],v=O[1],_=Object(a.b)(),N=function(){var t=Object(m.a)(h.a.mark((function t(c){var s,a,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),s={postId:e,name:r,email:l,body:x},t.next=4,D(s);case 4:return a=t.sent,_(j(a)),t.next=8,C(e);case 8:u=t.sent,n(u),o(""),d(""),v("");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)("form",{className:"NewCommentForm",onSubmit:N,children:[Object(P.jsx)("div",{className:"form-field",children:Object(P.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:r,onChange:function(t){return o(t.target.value)}})}),Object(P.jsx)("div",{className:"form-field",children:Object(P.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:l,onChange:function(t){return d(t.target.value)}})}),Object(P.jsx)("div",{className:"form-field",children:Object(P.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:x,onChange:function(t){return v(t.target.value)}})}),Object(P.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),I=(n(25),function(){return Object(P.jsx)("div",{className:"Loader",children:Object(P.jsx)("div",{className:"Loader__content"})})}),L=function(t){return t.comments},M=function(t){return t.selectedPost},g=(n(26),function(t){var e=t.selectedPostId,n=Object(f.useState)(!1),c=Object(b.a)(n,2),s=c[0],r=c[1],o=Object(f.useState)(!1),u=Object(b.a)(o,2),j=u[0],d=u[1],p=Object(a.b)(),O=Object(a.c)(M),x=Object(a.c)(L);Object(f.useEffect)((function(){_(e).then((function(t){return p(i(t))})),r(!1),d(!1)}),[e]);var v=function(){var t=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:0===(n=t.sent).length?(p(l([])),d(!0)):(p(l(n)),d(!1));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(m.a)(h.a.mark((function t(n){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(n);case 2:return t.next=4,C(e);case 4:c=t.sent,p(l(c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)("div",{className:"PostDetails",children:[Object(P.jsx)("h2",{children:"Post details:"}),Object(P.jsx)("section",{className:"PostDetails__post",children:Object(P.jsx)("p",{children:null===O||void 0===O?void 0:O.body})}),O?Object(P.jsxs)("section",{className:"PostDetails__comments","data-cy":"postDetails",children:[Object(P.jsx)("button",{type:"button",onClick:function(){s?(r(!1),d(!1)):(v(),r(!0))},className:"button",children:s?"Hide comments":"Show comments"}),s&&Object(P.jsx)("ul",{className:"PostDetails__list",children:x.map((function(t){return Object(P.jsxs)("li",{className:"PostDetails__list-item",children:[Object(P.jsx)("button",{type:"button",onClick:function(){return N(t.id)},className:"PostDetails__remove-button button",children:"X"}),Object(P.jsx)("p",{children:t.body})]},t.id)}))})]}):Object(P.jsx)(I,{}),j&&Object(P.jsx)("p",{className:"PostDetails__comments--notFound",children:"There are no comments yet \u2639"}),Object(P.jsx)("section",{children:Object(P.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(P.jsx)(k,{selectedPostId:e,setComments:v})})})]})}),A=function(){var t=Object(f.useState)([]),e=Object(b.a)(t,2),n=e[0],c=e[1],s=Object(f.useState)(0),r=Object(b.a)(s,2),o=r[0],i=r[1],l=Object(f.useState)(0),j=Object(b.a)(l,2),d=j[0],p=j[1],m=Object(a.b)();Object(f.useEffect)((function(){v(o).then((function(t){return m(u(t))})),S().then((function(t){return c(t)}))}),[]);var O=Object(a.c)(function(t){return function(e){return e.posts.filter((function(e){return t?e.userId===t:e}))}}(o));return Object(P.jsxs)("div",{className:"App",children:[Object(P.jsx)("header",{className:"App__header",children:Object(P.jsxs)("label",{children:["Select a user: \xa0",Object(P.jsxs)("select",{className:"App__user-selector",value:o,onChange:function(t){i(+t.target.value)},children:[Object(P.jsx)("option",{value:"0",children:"All users"}),n.map((function(t){return Object(P.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]})}),Object(P.jsxs)("main",{className:"App__main",children:[Object(P.jsx)("div",{className:"App__sidebar",children:Object(P.jsx)(E,{posts:O,selectPostId:d,onSelectedPostId:function(t){p(t)}})}),0!==d&&Object(P.jsx)("div",{className:"App__content",children:Object(P.jsx)(g,{selectedPostId:d})})]})]})};r.a.render(Object(P.jsx)(a.a,{store:p,children:Object(P.jsx)(A,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.7ae02a0b.chunk.js.map